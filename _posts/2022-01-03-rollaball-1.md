---
layout: single
title: "Roll a Ball - 1"
toc: true
toc_sticky: true
toc_label: "On This Page"
categories:
    - Csharp
---

<br>

계절학기 들으면서 남는 시간에 Unity 엔진을 조금 배워보려고 한다 ..

무료 Assets도 많으니까 내가 원하는 퀄리티의 게임을 만들 수 있지 않을까 싶다 .. 

Unity 를 마스터하면 Unreal engine 도 배울 것이다 .. !!

<br>


## 1. Roll a Ball

<br>

쉬운 게임을 만들면서 Unity 엔진 툴의 인터페이스나 단축키 같은걸 손에 익혀볼 것이다.

내가 만들 게임은 Roll a Ball 이다.

그냥 Sphere 형태의 주인공이 아이템을 먹으면서 스테이지를 깨는 형식의 간단한 게임이다.

먼저 Unity 를 실행하면 아무것도 없을텐데, Assets 파일 안에 폴더를 만들어준 후 우클릭을 한다.

그 다음 3D 객체에서 Sphere 을 클릭한다. Sphere의 이름을 정해주고 간단한 코딩을 해주자.

<br>

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PlayerBall : MonoBehaviour
{
    Rigidbody rigid;

    void Awake()
    {
        rigid = GetComponent<Rigidbody>();
    }

    
    void FixedUpdate()
    {
        float h = Input.GetAxisRaw("Horizontal");
        float v = Input.GetAxisRaw("Vertical");

        rigid.AddForce(new Vector3(h, 0, v), ForceMode.Impulse) ;
    }
}
```

<br>

이런 간단한 코딩만 해줘도 캐릭터가 방향키로 움직일 수 있게 된다.. !!

<br>

![Animation](https://user-images.githubusercontent.com/96330958/147930742-37835991-4013-4f9d-ac82-fbf4440857c2.gif)

<br>

캐릭터가 조금 빠르거나, 느린 것 같다면 Mass 를 조정해주도록 하자 !!

<br>

다음은 점프 구현이다 !! 

<br>

```c#
    public float jumpPower;
```

<br>

`public` 을 이용하면 inspector 탭에서 jump Power 의 인자값이 바로 나오니까 수정하기 편리하다 ㅎㅎ

<br>


```c#
void Update()
    {
        if (Input.GetButtonDown("Jump")) {
            rigid.AddForce(new Vector3(0, jumpPower, 0), ForceMode.Impulse);
        }
    }
```

<br>

위와 같은 코드를 넣어주면 점프를 할 수 있게 된다.

<br>

![image](https://user-images.githubusercontent.com/96330958/147935668-03ebe1d1-626b-4ae6-8896-8f4902058839.png)

<br>

내가 원하는 material 도 설정해줄 수 있다는 걸 배웠다 !

오늘은 여기까지 하고, 내일 이어서 하도록 하겠다 ㅎㅎ

<br>

```c#
    bool isJump;
```

<br>

isJump 추가 후

<br>

```c#
if (Input.GetButtonDown("Jump") && !isJump) {
            isJump = true;
            rigid.AddForce(new Vector3(0, jumpPower, 0), ForceMode.Impulse);
```

<br>

다음과 같이 코드를 짜주면, 처음 한 번만 점프를 하게 된다. 

<br>

```c#
void OnCollisionEnter(Collision collision)
    {
        if (collision.gameObject.name == "Floor")
            isJump = false;
    }
```

<br>

바닥에 닿았을 때 isJump 를 다시 false 시켜서 계속 점프가 가능하게끔 해줬다 !!!

<br>

이제 무한 점프가 안 된다.

플레이어의 세팅은 맞췄으니 아이템을 구현해보겠다.

<br>

Roatate(Vector3) : 매개변수 기준으로 회전시키는 함수

어떠한 환경에서도 항상 움직임 값은 동일해야하기 때문에

Time.deltaTime 반드시 필수 !!

<br>

```c#
 public float rotateSpeed;
    void Update()
    {
        transform.Rotate(Vector3.up * rotateSpeed * Time.deltaTime);
    }
```

<br>

오버로드 : 이름은 같지만 매개변수가 다른 함수를 호출

SetActive(bool) : 오브젝트 활성화 함수

<br>

```py
void ONTriggerEnter(Collider other)
    {
        if(other.name == "PlayerBall") {
            gameObject.SetActive(false);
        }
    }
```

<br>

gameObject.SetActive(false); ==> 아이템이 사라지는 걸 의미.

<br>

```py
public int itemCount;
```

<br>

```C#
if(other.name == "Player") {
            PlayerBall player = other.GetComponent<PlayerBall>();
            player.itemCount++; 
            gameObject.SetActive(false);
        }
```

<br>

위와 같이 코드를 짜주면, Player 가 Item 을 먹었을 때 Item 은 사라지게 된다 !!!!!!!!!

<br>

31:53